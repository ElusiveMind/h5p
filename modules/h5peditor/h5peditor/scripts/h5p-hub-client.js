!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=31)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.curry=function(e){var t=e.length;return function n(){var r=Array.prototype.slice.call(arguments,0);return r.length>=t?e.apply(null,r):function(){var e=Array.prototype.slice.call(arguments,0);return n.apply(null,r.concat(e))}}},i=(t.compose=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})},t.forEach=r(function(e,t){t.forEach(e)}),t.map=r(function(e,t){return t.map(e)}),t.filter=r(function(e,t){return t.filter(e)})),o=(t.some=r(function(e,t){return t.some(e)}),t.contains=r(function(e,t){return t.indexOf(e)!=-1}));t.without=r(function(e,t){return i(function(t){return!o(t,e)},t)}),t.inverseBooleanString=function(e){return("true"!==e).toString()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleClass=t.toggleVisibility=t.show=t.hide=t.classListContains=t.removeChild=t.querySelectorAll=t.nodeListToArray=t.querySelector=t.appendChild=t.toggleAttribute=t.attributeEquals=t.hasAttribute=t.removeAttribute=t.setAttribute=t.getAttribute=void 0;var r=n(0),i=t.getAttribute=(0,r.curry)(function(e,t){return t.getAttribute(e)}),o=t.setAttribute=(0,r.curry)(function(e,t,n){return n.setAttribute(e,t)}),a=(t.removeAttribute=(0,r.curry)(function(e,t){return t.removeAttribute(e)}),t.hasAttribute=(0,r.curry)(function(e,t){return t.hasAttribute(e)}),t.attributeEquals=(0,r.curry)(function(e,t,n){return n.getAttribute(e)===t}),t.toggleAttribute=(0,r.curry)(function(e,t){var n=i(e,t);o(e,(0,r.inverseBooleanString)(n),t)}),t.appendChild=(0,r.curry)(function(e,t){return e.appendChild(t)}),t.querySelector=(0,r.curry)(function(e,t){return t.querySelector(e)}),t.nodeListToArray=function(e){return Array.prototype.slice.call(e)}),s=(t.querySelectorAll=(0,r.curry)(function(e,t){return a(t.querySelectorAll(e))}),t.removeChild=(0,r.curry)(function(e,t){return e.removeChild(t)}),t.classListContains=(0,r.curry)(function(e,t){return t.classList.contains(e)}),t.hide=o("aria-hidden","true")),u=t.show=o("aria-hidden","false");t.toggleVisibility=(0,r.curry)(function(e,t){return(e?u:s)(t)}),t.toggleClass=(0,r.curry)(function(e,t,n){n.classList[t?"add":"remove"](e)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Eventful=function(){return{listeners:{},on:function(e,t,n){var r={listener:t,scope:n};return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(r),this},trigger:function(e,t){return(this.listeners[e]||[]).every(function(e){return e.listener.call(e.scope||this,t)!==!1})},propagate:function(e,t,n){var r=this;e.forEach(function(e){return t.on(e,function(t){return r.trigger(n||e,t)})})}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"init",value:function(t){e.dictionary=t}},{key:"get",value:function(t,n){var r=e.dictionary[t];if(void 0===r)return"Key not found in dictionary: "+t;for(var i in n)n[i]&&(r=r.replace(i,n[i]));return r}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=n(0),s=(0,o.setAttribute)("tabindex","0"),u=(0,o.removeAttribute)("tabindex"),l=(0,a.forEach)(u),c=(0,o.hasAttribute)("tabindex"),d=function(e,t){var n=e[t];n&&(l(e),s(n))},h=function(e,t){return e===t?0:e+1},f=function(e,t){return 0===e?t:e-1},p=function(){function e(){r(this,e),this.elements=[],this.boundHandleKeyDown=this.handleKeyDown.bind(this),this.boundHandleFocus=this.handleFocus.bind(this),this.selectedIndex=0}return i(e,[{key:"addElement",value:function(e){return this.elements.push(e),e.addEventListener("keydown",this.boundHandleKeyDown),e.addEventListener("focus",this.boundHandleFocus),1===this.elements.length&&s(e),e}},{key:"removeElement",value:function(e){return this.elements=(0,a.without)([e],this.elements),e.removeEventListener("keydown",this.boundHandleKeyDown),e.removeEventListener("focus",this.boundHandleFocus),c(e)&&(u(e),this.selectedIndex=0,d(this.elements,this.selectedIndex)),e}},{key:"handleKeyDown",value:function(e){var t=this.elements.length-1;switch(e.which){case 13:case 32:this.select(),e.preventDefault();break;case 35:this.selectedIndex=t,e.preventDefault();break;case 36:this.selectedIndex=0,e.preventDefault();break;case 37:case 38:this.selectedIndex=f(this.selectedIndex,t),e.preventDefault();break;case 39:case 40:this.selectedIndex=h(this.selectedIndex,t),e.preventDefault()}d(this.elements,this.selectedIndex),this.elements[this.selectedIndex].focus()}},{key:"handleFocus",value:function(e){this.selectedIndex=this.elements.indexOf(e.srcElement)}},{key:"forceSelectedIndex",value:function(e){this.selectedIndex=e,d(this.elements,this.selectedIndex)}},{key:"select",value:function(){void 0!=this.onSelect&&this.onSelect(this.elements[this.selectedIndex])}}]),e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.relayClickEventAs=void 0;var r=n(0);t.relayClickEventAs=(0,r.curry)(function(e,t,n){return n.addEventListener("click",function(r){t.trigger(e,{element:n,id:n.getAttribute("data-id")},!1),r.stopPropagation()}),n})},function(e,t,n){"use strict";(function(r,i,o){var a,s,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
!function(r,i){"object"===u(t)&&void 0!==e?e.exports=i():(a=i,s="function"==typeof a?a.call(t,n,t,e):a,void 0!==s&&(e.exports=s))}(void 0,function(){function e(e){return"function"==typeof e||"object"===(void 0===e?"undefined":u(e))&&null!==e}function t(e){return"function"==typeof e}function i(e){K=e}function a(e){X=e}function s(){return function(){return r.nextTick(f)}}function l(){return function(){W(f)}}function c(){var e=0,t=new ee(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function h(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<Z;e+=2){(0,re[e])(re[e+1]),re[e]=void 0,re[e+1]=void 0}Z=0}function p(){try{var e=n(30);return W=e.runOnLoop||e.runOnContext,l()}catch(e){return h()}}function y(e,t){var n=arguments,r=this,i=new this.constructor(b);void 0===i[oe]&&N(i);var o=r._state;return o?function(){var e=n[o-1];X(function(){return O(o,i,e,r._result)})}():L(r,i,e,t),i}function v(e){var t=this;if(e&&"object"===(void 0===e?"undefined":u(e))&&e.constructor===t)return e;var n=new t(b);return S(n,e),n}function b(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(e){return le.error=e,le}}function E(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function T(e,t,n){X(function(e){var r=!1,i=E(n,t,function(n){r||(r=!0,t!==n?S(e,n):M(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function A(e,t){t._state===se?M(e,t._result):t._state===ue?k(e,t._result):L(t,void 0,function(t){return S(e,t)},function(t){return k(e,t)})}function I(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===v?A(e,n):r===le?k(e,le.error):void 0===r?M(e,n):t(r)?T(e,n,r):M(e,n)}function S(t,n){t===n?k(t,m()):e(n)?I(t,n,w(n)):M(t,n)}function C(e){e._onerror&&e._onerror(e._result),x(e)}function M(e,t){e._state===ae&&(e._result=t,e._state=se,0!==e._subscribers.length&&X(x,e))}function k(e,t){e._state===ae&&(e._state=ue,e._result=t,X(C,e))}function L(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+se]=n,i[o+ue]=r,0===o&&e._state&&X(x,e)}function x(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?O(n,r,i,o):i(o);e._subscribers.length=0}}function j(){this.error=null}function _(e,t){try{return e(t)}catch(e){return ce.error=e,ce}}function O(e,n,r,i){var o=t(r),a=void 0,s=void 0,u=void 0,l=void 0;if(o){if(a=_(r,i),a===ce?(l=!0,s=a.error,a=null):u=!0,n===a)return void k(n,g())}else a=i,u=!0;n._state!==ae||(o&&u?S(n,a):l?k(n,s):e===se?M(n,a):e===ue&&k(n,a))}function P(e,t){try{t(function(t){S(e,t)},function(t){k(e,t)})}catch(t){k(e,t)}}function D(){return de++}function N(e){e[oe]=de++,e._state=void 0,e._result=void 0,e._subscribers=[]}function B(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[oe]||N(this.promise),Q(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&M(this.promise,this._result))):k(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function F(e){return new B(this,e).promise}function R(e){var t=this;return new t(Q(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function H(e){var t=this,n=new t(b);return k(n,e),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(e){this[oe]=D(),this._result=this._state=void 0,this._subscribers=[],b!==e&&("function"!=typeof e&&U(),this instanceof G?P(this,e):z())}function Y(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=G}var V=void 0;V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Q=V,Z=0,W=void 0,K=void 0,X=function(e,t){re[Z]=e,re[Z+1]=t,Z+=2,2===Z&&(K?K(f):ie())},J="undefined"!=typeof window?window:void 0,$=J||{},ee=$.MutationObserver||$.WebKitMutationObserver,te="undefined"==typeof self&&void 0!==r&&"[object process]"==={}.toString.call(r),ne="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3),ie=void 0;ie=te?s():ee?c():ne?d():void 0===J?p():h();var oe=Math.random().toString(36).substring(16),ae=void 0,se=1,ue=2,le=new j,ce=new j,de=0;return B.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ae&&n<e;n++)this._eachEntry(t[n],n)},B.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===v){var i=w(e);if(i===y&&e._state!==ae)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===G){var o=new n(b);I(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},B.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ae&&(this._remaining--,e===ue?k(r,n):this._result[t]=n),0===this._remaining&&M(r,this._result)},B.prototype._willSettleAt=function(e,t){var n=this;L(e,void 0,function(e){return n._settledAt(se,t,e)},function(e){return n._settledAt(ue,t,e)})},G.all=F,G.race=R,G.resolve=v,G.reject=H,G._setScheduler=i,G._setAsap=a,G._asap=X,G.prototype={constructor:G,then:y,catch:function(e){return this.then(null,e)}},Y(),G.polyfill=Y,G.Promise=G,G})}).call(t,n(13),n(6),n(14))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=n(5),u=function(){function e(t){r(this,e),i(this,(0,a.Eventful)()),this.rootElement=this.createElement(t)}return o(e,[{key:"createElement",value:function(e){var t=document.createElement("div");if(t.className="message "+e.type+(e.dismissible?" dismissible":""),t.setAttribute("role","alert"),e.dismissible){var n=document.createElement("div");n.className="close",t.appendChild(n),(0,s.relayClickEventAs)("close",this,n)}var r=document.createElement("div");if(r.className="message-content",r.innerHTML="<h2>"+e.title+"</h2><p>"+e.content+"</p>",t.appendChild(r),void 0!==e.action){var i=document.createElement("button");i.className="button",i.innerHTML=e.action,t.appendChild(i),(0,s.relayClickEventAs)("action-clicked",this,i)}return t}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=new s.default,n='[role="heading"] [aria-controls][aria-expanded]';t.onSelect=function(e){return(0,u.toggleAttribute)("aria-expanded",e)},(0,o.initCollapsible)(e,function(e,t){return(0,u.toggleVisibility)(e,t)},n),(0,u.querySelectorAll)(n,e).forEach(function(e){return t.addElement(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(9),a=n(4),s=r(a),u=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initCollapsible=void 0;var r=n(1),i=(0,r.attributeEquals)("aria-expanded","true");t.initCollapsible=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.toggleVisibility,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"[aria-controls][aria-expanded]";(0,r.querySelectorAll)(n,e).forEach(function(n){var o=n.getAttribute("aria-controls"),a=e.querySelector("#"+o);new MutationObserver(function(){return t(i(n),a)}).observe(n,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-expanded"]}),n.addEventListener("click",function(){return(0,r.toggleAttribute)("aria-expanded",n)}),t(i(n),a)})}},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgMjI1Ij4NCiAgPGRlZnM+DQogICAgPHN0eWxlPg0KICAgICAgLmNscy0xIHsNCiAgICAgIGZpbGw6IG5vbmU7DQogICAgICB9DQoNCiAgICAgIC5jbHMtMiB7DQogICAgICBmaWxsOiAjYzZjNmM3Ow0KICAgICAgfQ0KDQogICAgICAuY2xzLTMsIC5jbHMtNCB7DQogICAgICBmaWxsOiAjZmZmOw0KICAgICAgfQ0KDQogICAgICAuY2xzLTMgew0KICAgICAgb3BhY2l0eTogMC43Ow0KICAgICAgfQ0KICAgIDwvc3R5bGU+DQogIDwvZGVmcz4NCiAgPHRpdGxlPmNvbnRlbnQgdHlwZSBwbGFjZWhvbGRlcl8yPC90aXRsZT4NCiAgPGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+DQogICAgPGcgaWQ9ImNvbnRlbnRfdHlwZV9wbGFjZWhvbGRlci0xX2NvcHkiIGRhdGEtbmFtZT0iY29udGVudCB0eXBlIHBsYWNlaG9sZGVyLTEgY29weSI+DQogICAgICA8cmVjdCBjbGFzcz0iY2xzLTEiIHdpZHRoPSI0MDAiIGhlaWdodD0iMjI1Ii8+DQogICAgICA8cmVjdCBjbGFzcz0iY2xzLTIiIHg9IjExMi41MSIgeT0iNDMuNDEiIHdpZHRoPSIxNzYuOTYiIGhlaWdodD0iMTM1LjQ1IiByeD0iMTAiIHJ5PSIxMCIvPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTMiIGN4PSIxMzYuNjYiIGN5PSI2MS45OCIgcj0iNC44MSIvPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTMiIGN4PSIxNTEuNDkiIGN5PSI2MS45OCIgcj0iNC44MSIvPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTMiIGN4PSIxNjYuMSIgY3k9IjYxLjk4IiByPSI0LjgxIi8+DQogICAgICA8ZyBpZD0iX0dyb3VwXyIgZGF0YS1uYW1lPSImbHQ7R3JvdXAmZ3Q7Ij4NCiAgICAgICAgPGcgaWQ9Il9Hcm91cF8yIiBkYXRhLW5hbWU9IiZsdDtHcm91cCZndDsiPg0KICAgICAgICAgIDxwYXRoIGlkPSJfQ29tcG91bmRfUGF0aF8iIGRhdGEtbmFtZT0iJmx0O0NvbXBvdW5kIFBhdGgmZ3Q7IiBjbGFzcz0iY2xzLTQiIGQ9Ik0yNjMuMjgsOTUuMjFDMjYwLDkyLjA3LDI1NSw5MS41LDI0OC40Myw5MS41SDIyN3Y4SDE5OS41bC0yLjE3LDEwLjI0YTI1Ljg0LDI1Ljg0LDAsMCwxLDExLjQ4LTEuNjMsMTkuOTMsMTkuOTMsMCwwLDEsMTQuMzksNS41NywxOC4yNiwxOC4yNiwwLDAsMSw1LjUyLDEzLjYsMjMuMTEsMjMuMTEsMCwwLDEtMi44NCwxMS4wNSwxOC42NSwxOC42NSwwLDAsMS04LjA2LDcuNzksOSw5LDAsMCwxLTQuMTIsMS4zN0gyMzZ2LTIxaDEwLjQyYzcuMzYsMCwxMi44My0xLjYxLDE2LjQyLTVzNS4zOC03LjQ4LDUuMzgtMTMuNDRDMjY4LjIyLDEwMi4yOSwyNjYuNTcsOTguMzUsMjYzLjI4LDk1LjIxWm0tMTUsMTdjLTEuNDIsMS4yMi0zLjksMS4yNS03LjQxLDEuMjVIMjM2di0xNGg1LjYyYTkuNTcsOS41NywwLDAsMSw3LDIuOTMsNy4wNSw3LjA1LDAsMCwxLDEuODUsNC45MkE2LjMzLDYuMzMsMCwwLDEsMjQ4LjMxLDExMi4yNVoiLz4NCiAgICAgICAgICA8cGF0aCBpZD0iX1BhdGhfIiBkYXRhLW5hbWU9IiZsdDtQYXRoJmd0OyIgY2xhc3M9ImNscy00IiBkPSJNMjAyLjksMTE5LjExYTguMTIsOC4xMiwwLDAsMC03LjI4LDQuNTJsLTE2LTEuMjIsNy4yMi0zMC45MkgxNzR2MjJIMTUzdi0yMkgxMzZ2NTZoMTd2LTIxaDIxdjIxaDIwLjMxYy0yLjcyLDAtNS0xLjUzLTctM2ExOS4xOSwxOS4xOSwwLDAsMS00LjczLTQuODMsMjMuNTgsMjMuNTgsMCwwLDEtMy02LjZsMTYtMi4yNmE4LjExLDguMTEsMCwxLDAsNy4yNi0xMS43MloiLz4NCiAgICAgICAgPC9nPg0KICAgICAgPC9nPg0KICAgICAgPHJlY3QgY2xhc3M9ImNscy0zIiB4PSIxNzcuNjYiIHk9IjU3LjY2IiB3aWR0aD0iOTIuMjgiIGhlaWdodD0iOS4zOCIgcng9IjMuNSIgcnk9IjMuNSIvPg0KICAgIDwvZz4NCiAgPC9nPg0KPC9zdmc+DQo="},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(22),u=r(s),l=n(20),c=r(l),d=n(24),h=r(d),f=n(21),p=r(f),y=n(3),v=r(y),b=n(2),m=function(){function e(t,n){i(this,e),o(this,(0,b.Eventful)());var r=this;v.default.init(n),this.services=new p.default({apiRootUrl:t.apiRootUrl}),this.contentTypeSection=new c.default(t,this.services),this.uploadSection=new h.default(t,this.services),this.view=new u.default(t),this.propagate(["select"],this.contentTypeSection),this.propagate(["upload"],this.uploadSection),this.on("select",this.setPanelTitle,this),this.on("select",this.view.closePanel,this.view),this.view.on("tab-change",this.view.setSectionType,this.view),this.view.on("panel-change",this.view.togglePanelOpen.bind(this.view),this.view),this.contentTypeSection.on("reload",function(){r.services.setup(),r.contentTypeSection.initContentTypeList()}),this.on("clear-upload-form",function(){r.uploadSection.clearUploadForm()}),this.initTabPanel(t)}return a(e,[{key:"getContentType",value:function(e){return this.services.contentType(e)}},{key:"setPanelTitle",value:function(e){var t=this,n=e.id;this.getContentType(n).then(function(e){var r=e.title;return t.view.setTitle(r?r:n)})}},{key:"initTabPanel",value:function(e){var t=this,n=e.sectionId,r=void 0===n?"content-types":n,i=[{title:v.default.get("createContentTabLabel"),id:"content-types",content:this.contentTypeSection.getElement()},{title:v.default.get("uploadTabLabel"),id:"upload",content:this.uploadSection.getElement()}];i.filter(function(e){return e.id===r}).forEach(function(e){return e.selected=!0}),i.forEach(function(e){return t.view.addTab(e)}),this.view.addBottomBorder(),this.view.initTabPanel()}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=m},function(e,t){},function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){v&&p&&(v=!1,p.length?y=p.concat(y):b=-1,y.length&&u())}function u(){if(!v){var e=o(s);v=!0;for(var t=y.length;t;){for(p=y,y=[];++b<t;)p&&p[b].run();b=-1,t=y.length}p=null,v=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var d,h,f=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:r}catch(e){d=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var p,y=[],v=!1,b=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];y.push(new l(e,t)),1!==y.length||v||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=n(0),l=n(2),c=n(8),d=r(c),h=n(27),f=r(h),p=n(26),y=r(p),v=n(5),b=n(10),m=r(b),g=n(3),w=r(g),E=n(7),T=r(E),A="data-id",I=285,S="imagelightbox",C=function(e,t){return(t?s.show:s.hide)(e)},M=function(e){return"string"==typeof e&&0===e.length},k=(0,u.forEach)(s.hide),L=(0,s.setAttribute)("disabled",""),x=(0,s.removeAttribute)("disabled"),j=(0,s.attributeEquals)("aria-hidden","true"),_=function(){function e(t){var n=this;i(this,e),o(this,(0,l.Eventful)()),this.rootElement=this.createView(),this.buttonBar=this.rootElement.querySelector(".button-bar"),this.useButton=this.buttonBar.querySelector(".button-use"),this.installButton=this.buttonBar.querySelector(".button-install"),this.buttons=this.buttonBar.querySelectorAll(".button"),this.image=this.rootElement.querySelector(".content-type-image"),this.title=this.rootElement.querySelector(".text-details .title"),this.owner=this.rootElement.querySelector(".owner"),this.description=this.rootElement.querySelector(".text-details .small"),this.demoButton=this.rootElement.querySelector(".demo-button"),this.carousel=this.rootElement.querySelector(".carousel"),this.carouselList=this.carousel.querySelector("ul");var r=this.rootElement.querySelector("#"+S+"-detail");this.imageLightboxList=r.querySelector("."+S+"-list"),this.panel=this.rootElement.querySelector(".panel"),this.licencePanelHeading=this.rootElement.querySelector(".licence-panel-heading"),this.licencePanelBody=this.rootElement.querySelector("#licence-panel"),this.installMessage=this.rootElement.querySelector(".install-message"),this.container=this.rootElement.querySelector(".container"),this.installMessage.querySelector(".message-close").addEventListener("click",function(){return n.resetInstallMessage()}),(0,d.default)(this.panel),(0,f.default)(this.carousel),(0,y.default)(r),(0,v.relayClickEventAs)("close",this,this.rootElement.querySelector(".back-button")),(0,v.relayClickEventAs)("select",this,this.useButton),(0,v.relayClickEventAs)("install",this,this.installButton)}return a(e,[{key:"createView",value:function(){var e={title:"Images",progress:":num of :total",next:"Next image",prev:"Previous image",close:"Close dialog"},t="content-type-detail-view-title",n=document.createElement("div");return n.className="content-type-detail",n.id="content-type-detail",n.setAttribute("role","region"),n.setAttribute("tabindex","-1"),n.setAttribute("aria-labelledby",t),n.setAttribute("aria-hidden","true"),n.innerHTML='\n      <button class="back-button icon-arrow-thick" aria-label="'+w.default.get("contentTypeBackButtonLabel")+'" tabindex="0"></button>\n      <div class="container">\n        <div class="image-wrapper"><img class="img-responsive content-type-image" src="'+m.default+'"></div>\n        <div class="text-details">\n          <h2 id="'+t+'" class="title"></h2>\n          <div class="owner"></div>\n          <p class="small"></p>\n          <a class="button demo-button" target="_blank" aria-hidden="false" href="#">'+w.default.get("contentTypeDemoButtonLabel")+'</a>\n        </div>\n      </div>\n      <div class="carousel" role="region" data-size="5">\n        <button class="carousel-button previous" aria-hidden="true" disabled><span class="icon-arrow-thick"></span></button>\n        <button class="carousel-button next" aria-hidden="true" disabled><span class="icon-arrow-thick"></span></button>\n        <nav class="scroller">\n          <ul></ul>\n        </nav>\n      </div>\n      <hr />\n      <div role="alert" class="install-message message dismissible simple info" aria-hidden="true">\n        <button aria-label="'+w.default.get("contentTypeCloseButtonLabel")+'" class="message-close icon-close"></button>\n        <h3 class="title"></h3>\n      </div>\n      <div class="button-bar">\n        <button class="button button-primary button-use" aria-hidden="false" data-id="">'+w.default.get("contentTypeUseButtonLabel")+'</button>\n        <button class="button button-inverse-primary button-install" aria-hidden="true" data-id=""><span class="icon-arrow-thick"></span>'+w.default.get("contentTypeInstallButtonLabel")+'</button>\n        <button class="button button-inverse-primary button-installing" aria-hidden="true"><span class="icon-loading-search icon-spin"></span>'+w.default.get("contentTypeInstallingButtonLabel")+'</button>\n      </div>\n      <dl class="panel">\n        <dt aria-level="2" role="heading" class="licence-panel-heading">\n          <a href="#" role="button" aria-expanded="false" aria-controls="licence-panel">\n            <span class="icon-accordion-arrow"></span> '+w.default.get("contentTypeLicensePanelTitle")+'\n          </a>\n        </dt>\n        <dl id="licence-panel" role="region" aria-hidden="true">\n          <div class="panel-body"></div>\n        </dl>\n      </dl>\n      <div id="'+S+'-detail" class="'+S+'" role="dialog" aria-label="'+e.title+'">\n        <ol class="'+S+'-list"></ol>\n        <div class="'+S+'-progress">'+e.progress+'</div>\n        <div class="'+S+'-button next" role="button" aria-disabled="true" aria-label="'+e.next+'"></div>\n        <div class="'+S+'-button previous" role="button" aria-disabled="true" aria-label="'+e.prev+'"></div>\n        <div class="'+S+'-button close" role="button" tabindex="0" aria-label="'+e.close+'"></div>\n      </div>',n}},{key:"setInstallMessage",value:function(e){var t=e.success,n=void 0===t||t,r=e.message;(0,s.show)(this.installMessage),this.installMessage.querySelector(".title").innerText=r,this.installMessage.querySelector(".title").innerText=r,this.installMessage.className="install-message dismissible message simple "+(n?"info":"error")}},{key:"resetInstallMessage",value:function(){(0,s.hide)(this.installMessage),this.installMessage.querySelector(".title").innerText=""}},{key:"removeAllImagesInCarousel",value:function(){this.carouselList.querySelectorAll("li").forEach((0,s.removeChild)(this.carouselList)),this.imageLightboxList.innerHTML=""}},{key:"addImageToCarousel",value:function(e){var t=document.createElement("li");t.classList.add(S+"-image"),t.innerHTML='<img class="img-responsive" src="'+e.url+'" alt="'+e.alt+'">',this.imageLightboxList.appendChild(t);var n=document.createElement("li");n.className="slide",n.innerHTML='<img src="'+e.url+'" alt="'+e.alt+'" class="img-responsive" aria-controls="'+S+'-detail" />',this.carouselList.appendChild(n)}},{key:"reset",value:function(){this.installButton.removeAttribute("disabled"),this.messageViewElement&&(this.container.removeChild(this.messageViewElement),delete this.messageViewElement),(0,s.hide)(this.installMessage)}},{key:"apiVersionUnsupported",value:function(){this.installButton.setAttribute("disabled","disabled");var e=new T.default({type:"warning",title:w.default.get("contentTypeUnsupportedApiVersionTitle"),content:w.default.get("contentTypeUnsupportedApiVersionContent")});this.messageViewElement=e.getElement(),this.container.insertBefore(this.messageViewElement,this.container.childNodes[0])}},{key:"setImage",value:function(e){this.image.setAttribute("src",e||m.default)}},{key:"setId",value:function(e){this.installButton.setAttribute(A,e),this.useButton.setAttribute(A,e)}},{key:"setTitle",value:function(e){this.title.innerHTML=""+e}},{key:"setDescription",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&t.length>I?(this.description.innerHTML=this.ellipsis(I,t)+'<button class="read-more link">'+w.default.get("contentTypeReadMore")+"</button>",this.description.querySelector(".read-more, .read-less").addEventListener("click",function(){return e.toggleDescriptionExpanded(t)}),this.descriptionExpanded=!1):this.description.innerText=t}},{key:"toggleDescriptionExpanded",value:function(e){var t=this;this.descriptionExpanded=!this.descriptionExpanded,this.descriptionExpanded?this.description.innerHTML=e+'<button class="read-less link">'+w.default.get("contentTypeReadLess")+"</button>":this.description.innerHTML=this.ellipsis(I,e)+'<button class="read-more link">'+w.default.get("contentTypeReadMore")+"</button>",this.description.querySelector(".read-more, .read-less").addEventListener("click",function(){return t.toggleDescriptionExpanded(e)})}},{key:"ellipsis",value:function(e,t){return t.substr(0,e)+"..."}},{key:"setLicence",value:function(e,t){e&&("MIT"===e?this.licencePanelBody.querySelector(".panel-body").innerHTML='\n          <dl class="dl-horizontal">\n            <dt>Can</dt>\n            <dd>Use commercially</dd>\n            <dd>Modify</dd>\n            <dd>Distribute</dd>\n            <dd>Sublicense</dd>\n            <dd>Private use</dd>\n\n            <dt>Cannot</dt>\n            <dd>Hold liable</dd>\n\n            <dt>Must</dt>\n            <dd>Include copyright</dd>\n            <dd>Include license</dd>\n          </dl>\n        ':this.licencePanelBody.querySelector(".panel-body").innerText=e,(0,s.show)(this.licencePanelHeading)),(0,s.hide)(this.licencePanelBody)}},{key:"setOwner",value:function(e){this.owner.innerHTML=e?w.default.get("contentTypeOwner",{":owner":e}):""}},{key:"setExample",value:function(e){this.demoButton.setAttribute("href",e||"#"),C(this.demoButton,!M(e))}},{key:"setIsInstalled",value:function(e){this.showButtonBySelector(e?".button-use":".button-install")}},{key:"setIsRestricted",value:function(e){e?(L(this.useButton),L(this.installButton)):(x(this.useButton),x(this.installButton))}},{key:"showButtonBySelector",value:function(e){var t=this.buttonBar.querySelector(e);t&&(k(this.buttons),(0,s.show)(t))}},{key:"hide",value:function(){(0,s.hide)(this.rootElement)}},{key:"show",value:function(){(0,s.show)(this.rootElement)}},{key:"focus",value:function(){var e=this;setTimeout(function(){return e.rootElement.focus()},10)}},{key:"isHidden",value:function(){return j(this.rootElement)}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(15),u=r(s),l=n(2),c=n(3),d=r(c),h=function(){function e(t,n){i(this,e),o(this,(0,l.Eventful)()),this.services=n,this.apiVersion=t.apiVersion,this.view=new u.default(t),this.view.on("install",this.install,this),this.propagate(["close","select"],this.view)}return a(e,[{key:"hide",value:function(){this.view.hide()}},{key:"show",value:function(){this.view.show()}},{key:"focus",value:function(){this.view.focus()}},{key:"isHidden",value:function(){return this.view.isHidden()}},{key:"loadById",value:function(e){this.services.contentType(e).then(this.update.bind(this))}},{key:"install",value:function(e){var t=this,n=e.id;return this.view.showButtonBySelector(".button-installing"),this.services.installContentType(n).then(function(e){t.view.setIsInstalled(!0),t.view.showButtonBySelector(".button-get"),t.view.setInstallMessage({message:(0,d.default)("contentTypeInstallSuccess",{":contentType":$id})})}).catch(function(e){t.view.showButtonBySelector(".button-install");var n=e.errorCode?e:{success:!1,errorCode:"RESPONSE_FAILED",message:d.default.get("contentTypeInstallError",{":contentType":$id})};t.view.setInstallMessage(n),console.error("Installation error",e)})}},{key:"update",value:function(e){this.view.reset(),this.view.setId(e.machineName),this.view.setTitle(e.title||e.machineName),this.view.setDescription(e.description),this.view.setImage(e.icon),this.view.setExample(e.example),this.view.setOwner(e.owner),this.view.setIsInstalled(e.installed),this.view.setLicence(e.license,e.owner),this.view.setIsRestricted(e.restricted);var t=this.apiVersion.major>e.h5pMajorVersion||this.apiVersion.major==e.h5pMajorVersion&&this.apiVersion.minor>=e.h5pMinorVersion;e.installed||t||this.view.apiVersionUnsupported(),this.view.removeAllImagesInCarousel(),e.screenshots.forEach(this.view.addImageToCarousel,this.view)}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(n(0),n(1)),u=n(2),l=n(5),c=n(10),d=r(c),h=n(4),f=r(h),p=n(3),y=r(p),v=(0,s.setAttribute)("aria-hidden","true"),b=(0,s.setAttribute)("aria-hidden","false"),m=(0,s.getAttribute)("data-id"),g=function(){function e(t){var n=this;i(this,e),this.state=t,o(this,(0,u.Eventful)()),this.keyboard=new f.default,this.keyboard.onSelect=function(e){n.trigger("row-selected",{element:e,id:m(e)})},this.rootElement=document.createElement("ul"),this.rootElement.setAttribute("role","list"),this.rootElement.className="content-type-list"}return a(e,[{key:"hide",value:function(){v(this.rootElement)}},{key:"show",value:function(){b(this.rootElement)}},{key:"focus",value:function(){var e=(0,s.querySelector)('li[tabindex="0"]',this.rootElement);e&&e.focus()}},{key:"removeAllRows",value:function(){for(;this.rootElement.hasChildNodes();){var e=this.rootElement.lastChild;this.keyboard.removeElement(e),this.rootElement.removeChild(e)}}},{key:"addRow",value:function(e){var t=this.createContentTypeRow(e,this);(0,l.relayClickEventAs)("row-selected",this,t),this.rootElement.appendChild(t),this.keyboard.addElement(t)}},{key:"createContentTypeRow",value:function(e,t){var n=this.rootElement.querySelectorAll("li").length,r="content-type-row-title-"+n,i="content-type-row-description-"+n,o={text:y.default.get("contentTypeUseButtonLabel"),cls:"button-primary",icon:""},a={text:y.default.get("contentTypeGetButtonLabel"),cls:"button-inverse-primary button-install",icon:"icon-arrow-thick"},s=e.installed?o:a,u=e.title||e.machineName,c=e.summary||"",h=e.icon||d.default,f=e.restricted?'disabled="disabled"':"",p=document.createElement("li");p.id="content-type-"+e.machineName,p.setAttribute("data-id",e.machineName),p.setAttribute("aria-labelledby",r),p.setAttribute("aria-describedby",i),p.innerHTML='\n      <img class="img-responsive" src="'+h+'" alt="'+u+" "+y.default.get("contentTypeIconAltText")+'" />\n\n      <div class="content-type-row-info">\n        <h4 id="'+r+'">'+u+'</h4>\n        <div id="'+i+'" class="description">'+c+'</div>\n      </div>\n\n      <div class="content-type-row-button">\n        <button aria-describedby="'+r+'" class="button '+s.cls+'" data-id="'+e.machineName+'" tabindex="0" '+f+'>\n          <span class="'+s.icon+'"></span>\n          '+s.text+"\n        </button>\n      </div>\n   ";var v=p.querySelector(".button-primary");return v&&(0,l.relayClickEventAs)("select",t,v),p}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(17),u=r(s),l=n(2),c=function(){function e(t){i(this,e),o(this,(0,l.Eventful)()),this.view=new u.default(t),this.propagate(["row-selected","select"],this.view)}return a(e,[{key:"hide",value:function(){this.view.hide()}},{key:"show",value:function(){this.view.show()}},{key:"focus",value:function(){this.view.focus()}},{key:"update",value:function(e){this.view.removeAllRows(),e.forEach(this.view.addRow,this.view),this.trigger("update-content-type-list",{})}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(7),u=r(s),l=n(1),c=n(0),d=(n(5),n(28)),h=r(d),f=n(2),p=n(3),y=r(p),v=(0,c.forEach)((0,l.removeAttribute)("aria-selected")),b=9,m=function(){function e(t){var n=this;i(this,e),o(this,(0,f.Eventful)()),this.typeAheadEnabled=!0,this.rootElement=this.createElement(t),this.menu=this.rootElement.querySelector("nav"),this.menubar=this.rootElement.querySelector(".navbar-nav"),this.inputField=this.rootElement.querySelector('[role="search"] input'),this.displaySelected=this.rootElement.querySelector(".navbar-toggler-selected");var r=this.rootElement.querySelector('[role="search"] .input-group-addon');this.inputField.addEventListener("keyup",function(e){if(e.keyCode!=b){var t=e.target.parentElement.querySelector("#hub-search-bar");(n.typeAheadEnabled||13==e.which||13==e.keyCode)&&n.trigger("search",{element:t,query:t.value})}}),r.addEventListener("click",function(e){var t=e.target.parentElement.querySelector("#hub-search-bar");n.trigger("search",{element:t,query:t.value}),t.focus()})}return a(e,[{key:"createElement",value:function(e){var t="content-type-filter",n=y.default.get("contentTypeSearchFieldPlaceholder"),r=document.createElement("div");return r.className="content-type-section-view",r.innerHTML='\n      <div class="menu-group">\n        <nav  role="menubar" class="navbar">\n          <div class="navbar-header">\n             <button class="navbar-toggler navbar-toggler-right" tabindex="0" aria-haspopup="true" aria-controls="'+t+'" aria-expanded="false">\n               <span class="icon-accordion-arrow"></span>\n             </button>\n            <span class="navbar-toggler-selected"></span>\n            <span class="navbar-brand">'+y.default.get("contentTypeSectionTitle")+'</span>\n          </div>\n\n          <ul id="'+t+'" class="navbar-nav"></ul>\n        </nav>\n\n        <div class="input-group" role="search">\n          <input id="hub-search-bar" class="form-control form-control-rounded" type="text" aria-label="'+n+'" placeholder="'+n+'" />\n          <div class="input-group-addon icon-search"></div>\n        </div>\n      </div>',r}},{key:"displayMessage",value:function(e){var t=this;e.action=y.default.get("reloadButtonLabel");var n=new u.default(e),r=n.getElement();n.on("action-clicked",function(){t.rootElement.classList.remove("error"),r.parentNode.removeChild(r),t.trigger("reload")}),this.rootElement.classList.add("error"),this.rootElement.appendChild(n.getElement())}},{key:"addMenuItem",value:function(e){var t=this,n=e.title,r=e.id,i=e.selected,o=e.eventName,a=document.createElement("li");return a.setAttribute("role","menuitem"),a.setAttribute("data-id",r),a.innerText=n,i&&(a.setAttribute("aria-selected","true"),this.displaySelected.innerText=n,this.trigger("menu-selected",{element:a,choice:o})),a.addEventListener("click",function(e){t.trigger("menu-selected",{element:e.target,choice:o})}),this.menubar.appendChild(a),a}},{key:"clearInputField",value:function(){this.inputField.value=""}},{key:"setDisplaySelected",value:function(e){this.displaySelected.innerText=e}},{key:"selectMenuItemById",value:function(e){var t=this.menubar.querySelectorAll('[role="menuitem"]'),n=this.menubar.querySelector('[role="menuitem"][data-id="'+e+'"]');n&&(v(t),n.setAttribute("aria-selected","true"),this.trigger("menu-selected",{element:n,id:n.getAttribute("data-id")}))}},{key:"initMenu",value:function(){var e=document.createElement("span");e.className="menuitem-underline",this.menubar.appendChild(e),(0,h.default)(this.menu)}},{key:"addDeactivatedStyleToMenu",value:function(){this.menu.classList.remove("deactivated")}},{key:"removeDeactivatedStyleFromMenu",value:function(){this.menu.classList.add("deactivated")}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(19),u=r(s),l=n(23),c=r(l),d=n(18),h=r(d),f=n(16),p=r(f),y=n(2),v=n(3),b=r(v),m=function(){function e(t,n){var r=this;i(this,e),o(this,(0,y.Eventful)()),e.Tabs={ALL:{id:"filter-all",title:b.default.get("contentTypeSectionAll"),eventName:"all"},MY_CONTENT_TYPES:{id:"filter-my-content-types",title:b.default.get("contentTypeSectionMine"),eventName:"my-content-types",selected:!0},MOST_POPULAR:{id:"filter-most-popular",title:b.default.get("contentTypeSectionPopular"),eventName:"most-popular"}},this.view=new u.default(t),this.searchService=new c.default(n),this.contentTypeList=new h.default,this.contentTypeDetail=new p.default(t,n);var a=document.createElement("div");a.classList.add("content-type-section"),this.rootElement=a,this.rootElement.appendChild(this.contentTypeList.getElement()),this.rootElement.appendChild(this.contentTypeDetail.getElement()),this.view.getElement().appendChild(this.rootElement),this.propagate(["select","update-content-type-list"],this.contentTypeList),this.propagate(["select"],this.contentTypeDetail),this.propagate(["reload"],this.view),this.view.on("search",this.search,this),this.view.on("search",this.view.selectMenuItemById.bind(this.view,e.Tabs.ALL.id)),this.view.on("menu-selected",this.closeDetailView,this),this.view.on("menu-selected",this.applySearchFilter,this),this.view.on("menu-selected",this.clearInputField,this),this.view.on("menu-selected",this.updateDisplaySelected,this),this.contentTypeList.on("row-selected",this.showDetailView,this),this.contentTypeDetail.on("close",this.closeDetailView,this),this.contentTypeDetail.on("select",this.closeDetailView,this),Object.keys(e.Tabs).forEach(function(t){return r.view.addMenuItem(e.Tabs[t])}),this.view.initMenu()}return a(e,[{key:"handleError",value:function(e){this.view.displayMessage({type:"error",title:b.default.get("errorCommunicatingHubTitle"),content:b.default.get("errorCommunicatingHubContent")})}},{key:"search",value:function(e){var t=this,n=e.query;e.keyCode;this.searchService.search(n).then(function(e){return t.contentTypeList.update(e)})}},{key:"updateDisplaySelected",value:function(e){this.view.setDisplaySelected(e.element.innerText)}},{key:"applySearchFilter",value:function(t){var n=this;switch(t.choice){case e.Tabs.ALL.eventName:this.searchService.sortOn("restricted").then(function(e){return n.contentTypeList.update(e)});break;case e.Tabs.MY_CONTENT_TYPES.eventName:this.searchService.filterOutRestricted().then(function(e){return n.searchService.sortOnRecent(e)}).then(function(e){return n.contentTypeList.update(e)});break;case e.Tabs.MOST_POPULAR.eventName:var r=["restricted","popularity"];this.searchService.sortOn(r).then(function(e){return n.contentTypeList.update(e)})}}},{key:"clearInputField",value:function(t){t.id!==e.Tabs.ALL.id&&this.view.clearInputField()}},{key:"showDetailView",value:function(e){var t=this,n=e.id;this.contentTypeList.hide(),this.contentTypeDetail.loadById(n),this.contentTypeDetail.show(),this.view.typeAheadEnabled=!1,this.view.removeDeactivatedStyleFromMenu(),setTimeout(function(){t.contentTypeDetail.focus()},300)}},{key:"closeDetailView",value:function(){this.contentTypeDetail.isHidden()||(this.contentTypeDetail.hide(),this.contentTypeList.show(),this.view.typeAheadEnabled=!0,this.view.addDeactivatedStyleToMenu(),this.contentTypeList.focus())}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=m},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(25);var o=function(){function t(e){var n=e.apiRootUrl;r(this,t),this.apiRootUrl=n,this.setup()}return i(t,[{key:"setup",value:function(){this.cachedContentTypes=fetch(this.apiRootUrl+"content-type-cache",{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(this.isValid)}},{key:"contentTypes",value:function(){return this.cachedContentTypes.then(function(e){return e.libraries})}},{key:"recentlyUsed",value:function(){return this.cachedContentTypes.then(function(e){return e.recentlyUsed})}},{key:"contentType",value:function(e){return this.contentTypes().then(function(t){return t.filter(function(t){return t.machineName===e})[0]})}},{key:"installContentType",value:function(e){return fetch(ns.getAjaxUrl("library-install",{id:e}),{method:"POST",credentials:"include",body:""}).then(function(e){return e.json()}).then(this.rejectIfNotSuccess)}},{key:"uploadContent",value:function(e){return fetch(this.apiRootUrl+"library-upload",{method:"POST",credentials:"include",body:e}).then(function(e){return e.json()})}},{key:"isValid",value:function(t){return t.messageCode?e.reject(t):e.resolve(t)}},{key:"rejectIfNotSuccess",value:function(t){return e[t.success?"resolve":"reject"](t)}}]),t}();t.default=o}).call(t,n(6))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),u=r(s),l=n(29),c=r(l),d=(n(0),n(1)),h=n(2),f=n(5),p="data-id",y=(0,d.hasAttribute)("open"),v=function(){function e(t){i(this,e),o(this,(0,h.Eventful)()),this.rootElement=this.createPanel(t),this.panel=this.rootElement.querySelector(".panel"),this.toggler=this.rootElement.querySelector("[aria-expanded][aria-controls]"),this.selectedName=this.rootElement.querySelector(".h5p-hub-selected"),this.tablist=this.rootElement.querySelector('[role="tablist"]'),this.tabContainerElement=this.rootElement.querySelector(".tab-panel"),(0,u.default)(this.panel),(0,f.relayClickEventAs)("panel-change",this,this.toggler)}return a(e,[{key:"closePanel",value:function(){this.toggler.setAttribute("aria-expanded","false")}},{key:"setTitle",value:function(e){this.selectedName.innerText=e}},{key:"createPanel",value:function(e){var t=(e.title,e.sectionId),n=void 0===t?"content-types":t,r=e.expanded,i=void 0!==r&&r,o={h5pHub:"H5P Hub."},a=document.createElement("section");return a.className+="h5p-hub h5p-sdk",a.innerHTML='\n      <div class="panel">\n        <div aria-level="1" role="heading">\n          <span role="button" class="icon-hub-icon" aria-expanded="'+i+'" aria-controls="panel-body-'+n+'">\n          <span class="h5p-hub-description">'+o.h5pHub+'</span>\n          <span class="h5p-hub-selected"></span>\n        </span>\n        </div>\n        <div id="panel-body-'+n+'" role="region" aria-hidden="'+!i+'">\n          <div class="tab-panel">\n            <nav>\n              <ul role="tablist"></ul>\n            </nav>\n          </div>\n        </div>\n      </div>',a}},{key:"togglePanelOpen",value:function(){var e=this.panel;y(e)?e.removeAttribute("open"):(e.setAttribute("open",""),setTimeout(function(){e.querySelector("#hub-search-bar").focus()},20))}},{key:"addTab",value:function(e){var t=e.title,n=e.id,r=e.content,i=e.selected,o=void 0!==i&&i,a="tab-"+n,s="tab-panel-"+n,u=document.createElement("li");u.className+="tab",u.id=a,u.setAttribute("aria-controls",s),u.setAttribute("aria-selected",o.toString()),u.setAttribute(p,n),u.setAttribute("role","tab"),u.innerText=t,(0,f.relayClickEventAs)("tab-change",this,u);var l=document.createElement("div");l.id=s,l.className+="tabpanel",l.setAttribute("aria-labelledby",a),l.setAttribute("aria-hidden",(!o).toString()),l.setAttribute("role","tabpanel"),l.appendChild(r),this.tablist.appendChild(u),this.tabContainerElement.appendChild(l),o&&this.trigger("tab-change",{element:u,id:n})}},{key:"addBottomBorder",value:function(){this.tablist.appendChild(document.createElement("span"))}},{key:"initTabPanel",value:function(){(0,c.default)(this.tabContainerElement)}},{key:"setSectionType",value:function(e){var t=e.id;this.panel.className="h5p-section-"+t+" panel"}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=function(){function e(t){r(this,e),this.services=t}return i(e,[{key:"search",value:function(e){return this.services.contentTypes().then(d(e))}},{key:"sortOn",value:function(e){return this.services.contentTypes().then(function(t){return s(t,e)})}},{key:"sortOnRecent",value:function(e){return this.services.recentlyUsed().then(function(t){return b(e,t)})}},{key:"filterOutRestricted",value:function(){return this.services.contentTypes().then(function(e){return e.filter(function(e){return!e.restricted})})}}]),e}();t.default=a;var s=function(e,t){var n=e.map(function(e){return e.hasOwnProperty("score")&&e.hasOwnProperty("contentType")?e:{contentType:e,score:1}});return t=Array.isArray(t)?t:[t],n.sort(function(e,n){return u(e,n,t)}).map(function(e){return e.contentType})},u=function(e,t,n){switch(n[0]){case"restricted":return l(e,t,n.slice(1));case"popularity":return c(e,t,n[0],n.slice(1));default:return h(e,t)}},l=function(e,t,n){return!e.contentType.restricted==!t.contentType.restricted?n.length?u(e,t,n):0:e.contentType.restricted?1:t.contentType.restricted?-1:void 0},c=function(e,t,n,r){return e.contentType.hasOwnProperty(n)?t.contentType.hasOwnProperty(n)?e.contentType[n]>t.contentType[n]?1:e.contentType[n]<t.contentType[n]?-1:r.length?u(e,t,r):0:-1:1},d=(0,o.curry)(function(e,t){return""==e?t:s(t.map(function(t){return{contentType:t,score:f(e,t)}}).filter(function(e){return e.score>0}),["restricted","default"])}),h=function(e,t){return!e.contentType.installed&&t.contentType.installed?1:e.contentType.installed&&!t.contentType.installed?-1:t.score!==e.score?t.score-e.score:t.contentType.popularity-e.contentType.popularity},f=function(e,t){var n=e.split(" ").filter(function(e){return""!==e}),r=n.map(function(e){return p(e,t)});return r.indexOf(0)>-1?0:r.reduce(function(e,t){return e+t},0)},p=function(e,t){return e=e.trim(),y(e,t.title)?100:y(e,t.summary)?5:y(e,t.description)?5:v(e,t.keywords)?5:y(e,t.machineName)?1:0},y=function(e,t){return void 0!==t&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},v=function(e,t){return void 0!==t&&""!==e&&t.some(function(t){return y(e,t)})},b=function(e,t){return e.sort(function(e,n){var r=t.indexOf(e.machineName.toString()),i=t.indexOf(n.machineName.toString());return r===-1&&i===-1?0:r!==-1&&i===-1?-1:r===-1&&i!==-1?1:r!==-1&&i!==-1?r<i?-1:1:void 0})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),u=r(s),l=n(2),c=n(7),d=r(c),h=function(){function e(t,n){i(this,e),o(this,(0,l.Eventful)()),this.services=n;var r=this.renderUploadForm();this.initUploadForm(r),this.messageWrapper=document.createElement("div"),this.messageWrapper.className="message-wrapper";var a=document.createElement("div");a.appendChild(this.messageWrapper),a.appendChild(r),this.rootElement=a}return a(e,[{key:"renderUploadForm",value:function(){var e=document.createElement("div");return e.innerHTML='\n      <div class="upload-wrapper">\n        <div class="upload-form">\n          <input readonly class="upload-path" placeholder="'+u.default.get("uploadPlaceholder")+'"/>\n          <button class="button use-button">Use</button>\n          <div class="input-wrapper">\n            <input type="file" />\n            <button class="button upload-button" tabindex="0">'+u.default.get("uploadFileButtonLabel")+'</button>\n          </div>\n        </div>\n        <div class="upload-instructions">'+u.default.get("uploadInstructions")+"</div>\n      </div>\n    ",e}},{key:"initUploadForm",value:function(e){var t=this,n=e.querySelector('.upload-wrapper input[type="file"]'),r=e.querySelector(".upload-button"),i=e.querySelector(".upload-path"),o=e.querySelector(".use-button");n.onchange=function(){if(""!==this.value){t.clearUserMessages(),i.value=this.value.replace("C:\\fakepath\\",""),r.textContent=u.default.get("uploadFileButtonChangeLabel");"h5p"!==t.getFileExtension(this.value)?(t.renderMessage({type:"error",title:u.default.get("h5pFileWrongExtensionTitle"),content:u.default.get("h5pFileWrongExtensionContent")}),o.style.display="none"):o.style.display="inline-block"}},o.addEventListener("click",function(){var e=new FormData;e.append("h5p",n.files[0]),t.services.uploadContent(e).then(function(e){t.trigger("upload",e)})}),i.onclick=function(){n.click()},i.onkeydown=function(e){13!==e.which&&32!==e.which||n.click()},r.onclick=function(){n.click()},r.onkeydown=function(e){13!==e.which&&32!==e.which||n.click()},this.uploadInput=n,this.uploadPath=i,this.uploadButton=r,this.useButton=o}},{key:"clearUploadForm",value:function(){this.uploadInput.value="",this.uploadPath.value=u.default.get("uploadPlaceholder"),this.uploadButton.textContent=u.default.get("uploadFileButtonLabel"),this.useButton.style.display="none"}},{key:"clearUserMessages",value:function(){this.removeAllChildren(this.rootElement.querySelector(".message-wrapper"))}},{key:"getFileExtension",value:function(e){return e.replace(/^.*\./,"")}},{key:"renderMessage",value:function(e){var t=new d.default(e);this.prepend(this.messageWrapper,t.getElement())}},{key:"prepend",value:function(e,t){e.insertBefore(t,e.firstChild)}},{key:"removeAllChildren",value:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=h},function(e,t,n){"use strict";(function(e){!function(t){function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function a(t){if(t.bodyUsed)return e.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new e(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function u(e){var t=new FileReader,n=s(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=s(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(m.arrayBuffer&&m.blob&&w(e))this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!E(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return e.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return e.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return e.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||e.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return e.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return e.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return T.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var n=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function y(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new o;return e.replace(/\r?\n[\t ]+/," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function b(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(m.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(e){return e&&DataView.prototype.isPrototypeOf(e)},E=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,t){e=n(e),t=r(t);var i=this.map[e];this.map[e]=i?i+","+t:t},o.prototype.delete=function(e){delete this.map[n(e)]},o.prototype.get=function(e){return e=n(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},o.prototype.set=function(e,t){this.map[n(e)]=r(t)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var A=[301,302,303,307,308];b.redirect=function(e,t){if(A.indexOf(t)===-1)throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},t.Headers=o,t.Request=p,t.Response=b,t.fetch=function(t,n){return new e(function(e,r){var i=new p(t,n),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL"),e(new b("response"in o?o.response:o.responseText,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&m.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0)}).call(t,n(6))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.querySelector(".next"),n=e.querySelector(".previous"),r=e.querySelector(".close"),i=new l.default,o={currentImage:!1};return k(t,function(){return M(e,t,o.currentImage+1)}),x(t,h.BACKWARD,function(){return A(r)}),k(n,function(){return M(e,n,o.currentImage-1)}),x(n,h.BACKWARD,function(){return A(t,r)}),k(r,function(){return T(e)}),x(r,h.FORWARD,function(){return A(t,n)}),new MutationObserver((0,s.forEach)(j(e,o,i))).observe(e,{subtree:!1,childList:!1,attributes:!0,attributeOldValue:!0,attributeFilter:[c]}),e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var a=n(1),s=n(0),u=n(4),l=r(u),c="data-show",d={TAB:9,ENTER:13,SHIFT:16,SPACE:32},h={FORWARD:0,BACKWARD:1},f=function(e){return e.classList.add("active")},p=function(e){e.classList.remove("active"),e.removeAttribute("aria-live")},y=(0,a.setAttribute)("aria-live","polite"),v=function(e){e.tabIndex=0,e.removeAttribute("aria-disabled")},b=function(e){e.tabIndex=-1,e.setAttribute("aria-disabled","true")},m=(0,a.hasAttribute)("aria-disabled"),g=function(e,t){return(t?b:v)(e)},w=function(e,t){return(t?p:f)(e)},E=(0,s.curry)(function(e,t){return(0,a.setAttribute)("data-show",t,e)}),T=(0,a.removeAttribute)(c),A=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)if(t[r].tabIndex!==-1)return t[r].focus()},I=function(e,t){for(var n=e.parentNode.children,r=0;r<n.length;r++){var i=n[r];i!==e&&(t?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden",!0))}},S=void 0,C=function(e,t){var n=e.querySelectorAll(".imagelightbox-image"),r=e.querySelector(".imagelightbox-progress"),i=e.querySelector(".previous"),o=e.querySelector(".next");if(n.forEach(function(e){return p(e)}),null!==t.currentImage){var a=e.querySelector(".imagelightbox-image:nth-child("+(t.currentImage+1)+")");f(a),y(a)}S||(S=r.innerText),r.innerText=S.replace(":num",t.currentImage+1).replace(":total",n.length),w(i,!n.length),w(o,!n.length),g(i,0===t.currentImage),g(o,t.currentImage===n.length-1),w(e,null===t.currentImage),I(e,null===t.currentImage)},M=function(e,t,n){m(t)||E(e,n)},k=function(e,t){e.addEventListener("click",t),e.addEventListener("keypress",function(e){e.which!==d.ENTER&&e.which!==d.SPACE||(t(),e.preventDefault())})},L={},x=function(e,t,n){e.addEventListener("keydown",function(e){L[e.which]=!0,e.which===d.TAB&&(L[d.SHIFT]?t===h.BACKWARD&&(n(),e.preventDefault()):t===h.FORWARD&&(n(),e.preventDefault()))}),e.addEventListener("keyup",function(e){delete L[e.which]})},j=(0,s.curry)(function(e,t,n,r){if("attributes"===r.type&&r.attributeName===c){var i=parseInt(r.target.getAttribute(c));C(e,o(t,{currentImage:isNaN(i)?null:i}))}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.querySelector(".next"),n=e.querySelector(".previous"),r=new l.default,i={displayCount:e.getAttribute(c)||5,position:0};return t.addEventListener("click",function(){return m(e,i,t,function(e){return e.position--})}),n.addEventListener("click",function(){return m(e,i,n,function(e){return e.position++})}),(0,a.querySelectorAll)("[aria-controls]",e).forEach(g(e,r)),new MutationObserver((0,s.forEach)(w(e,i,r))).observe(e,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[c]}),b(e,i),e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var a=n(1),s=n(0),u=n(4),l=r(u),c="data-size",d=(0,a.setAttribute)("disabled",""),h=(0,a.removeAttribute)("disabled"),f=function(e,t){return(t?h:d)(e)},p=(0,s.curry)(function(e,t){return(0,a.setAttribute)("aria-hidden",e.toString(),t)}),y=(0,a.hasAttribute)("disabled"),v=(0,s.curry)(function(e,t){return(0,a.setAttribute)("data-show",t,e)}),b=function(e,t){var n=e.querySelector(".previous"),r=e.querySelector(".next"),i=e.querySelector("ul"),o=i.childElementCount;i.style.width=100/t.displayCount*o+"%",i.style.marginLeft=t.position*(100/t.displayCount)+"%",(0,a.querySelectorAll)("li",e).forEach(function(e){return e.style.width=100/o+"%"}),[n,r].forEach(p(t.displayCount>=o)),f(r,t.position>t.displayCount-o),f(n,t.position<0)},m=function(e,t,n,r){y(n)||(r(t),b(e,t))},g=(0,s.curry)(function(e,t,n,r){var i=n.getAttribute("aria-controls"),o=document.querySelector("#"+i);return n.addEventListener("click",function(e){return v(o,r)}),t.addElement(n),n}),w=(0,s.curry)(function(e,t,n,r){"childList"===r.type&&(0,a.nodeListToArray)(r.addedNodes).filter((0,a.classListContains)("slide")).map((0,a.querySelector)("img")).filter(function(e){return null!==e}).forEach(g(e,n)),b(e,o(t,{displayCount:e.getAttribute(c)||5,position:0}))})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(0,o.querySelectorAll)('[role="menuitem"]',e),n=e.querySelector("[aria-controls][aria-expanded]"),r=new l.default;r.onSelect=function(e){h(t,e),d(n)},t.forEach(function(e){e.addEventListener("click",function(e){var i=e.target,o=t.indexOf(i);h(t,i),d(n),r.forceSelectedIndex(o)}),r.addElement(e)}),(0,s.initCollapsible)(e,function(e,t){return(0,o.toggleClass)("collapsed",!e,t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(1),a=n(0),s=n(9),u=n(4),l=r(u),c=(0,a.forEach)((0,o.removeAttribute)("aria-selected")),d=(0,o.setAttribute)("aria-expanded","false"),h=function(e,t){c(e),t.setAttribute("aria-selected","true")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(0,o.querySelectorAll)('[role="tab"]',e),n=new u.default;n.onSelect=p(t),t.forEach(function(r){f(e,r),r.addEventListener("click",function(e){var r=e.target,i=t.indexOf(r);p(t,r),n.forceSelectedIndex(i)}),n.addElement(r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(1),a=n(0),s=n(4),u=r(s),l=(0,a.forEach)((0,o.setAttribute)("aria-hidden","true")),c=(0,o.setAttribute)("aria-hidden","false"),d=(0,o.attributeEquals)("aria-selected","true"),h=(0,a.forEach)((0,o.removeAttribute)("aria-selected")),f=function(e,t){new MutationObserver(function(){var n=t.getAttribute("aria-controls"),r=e.querySelector("#"+n),i=(0,o.querySelectorAll)('[role="tabpanel"]',e);d(t)&&(l(i),c(r))}).observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-selected"]})},p=(0,a.curry)(function(e,t){h(e),t.setAttribute("aria-selected","true")})},function(e,t){},function(e,t,n){"use strict";n(12),H5P=H5P||{},H5P.HubClient=n(11).default}]);